---
title: '从零开始学架构'
---

# 从零开始学架构

## 第一章 概念和基础

### 软件架构是什么？

软件架构是指软件系统的顶层结构，而架构设计的目的是为了解决软件复杂度。

- 避免为了高指标而做架构设计，有时候并不需要架构设计，会造成更高的项目成本
- 机器语言、汇编语言、高级语言的演进，解决了编码复杂度

#### 系统架构的结构该如何拆解？

可基于以下维度拆解：

- 系统、子系统： 由一群有关联的个体所组成，根据某种规则运作。
- 模块、组件： 从逻辑角度拆分得到的单元是模块，负责职责分离；从物理角度拆分得到的单元是组件，负责单元复用，独立可替换。
- 框架、架构： 框架提供组件的规范；架构提供系统的结构。

### 架构设计的复杂度来源于什么？

- 高性能，理论上会存在上限，优化只能逼近该上限，有以下手段：
  - 单进程 -> 多进程
  - 单线程 -> 多线程
  - 单机 -> 多机
  - 单任务 -> 多任务
- 高可用：
  - 机器冗余，包含连接管理，分配算法（n主n备）
  - 存储高可用（一致性、可用性、分区容错性最多满足两个）
  - 状态决策： 独裁式（单点监测）、协商式（监测&投票）、民主式（去中心化）
- 可拓展，可通过面向对象、设计模式解决：
  - 预测变化： 预测可能错误，不能每个设计点都考虑可拓展性
  - 应对变化： 
    - 方法一： 基本架构拆分变化层和稳定层
    - 方法二： 提炼出抽象层和实现层，抽象层保持稳定，实现层支持定制开发
- 低成本
  - 和高性能、高可用冲突，所以属于架构设计的附加约束
  - 往往通过新技术引入实现
- 安全性：
  - 功能安全、架构安全

## 第二章 架构设计原则

### 架构设计三原则是什么？

- 合适原则： 合适由于业界领先
- 简单原则： 简单优于复杂
- 演化原则： 演化优于一步到位

#### 合适原则

结合当前人力、条件、业务等约束，将资源整合发挥最大功效，快速落地，而不是生搬硬套。

常见问题：
- 没有那么多人，却想干那么多活
- 没有那么多卓越的业务场景积累，却想创造业界领先方案

#### 简单原则

简单优于复杂。

- 结构复杂性： 当组成的组件越多，组件的稳定性会直接影响系统的稳定性
- 逻辑复杂性： 逻辑杂糅在一个组件里，改动影响范围大

#### 演化原则

架构应满足当下业务需要，随着业务变化而变化

- 设计过程中，保留优秀设计，修复缺陷设计，去掉无用设计
- 业务变化时，架构要拓展、重构、甚至重写
- 避免生搬硬套大公司做法，要根据自身业务特点，逐步演化

## 第三章 架构设计流程

- 识别复杂度： 罗列复杂度问题，优先级排序处理
- 设计备选方案：
  - 设计3-5个最佳
  - 备选方案差异要比较明显
  - 避免局限于已熟悉的技术
  - 备选阶段关注技术选型，而非技术细节
- 评估和选择备选方案：
  - 360度环评： 性能、可用性、成本、复杂度、安全性、可拓展性等
  - 评估是否遵守架构设计的三大原则
  - 指导思想： 最简派（选择最简单）、最牛派（技术上看起来最牛）、最熟派（熟悉哪个用哪个）、领导派（领导拍板）
  - 通过质量属性优先级排序，选择最优备选方案，质量属性如： 性能、复杂度、成本、可拓展性、可用性
- 详细方案设计：
  - 深入技术细节和原理，避免成为PPT架构师
  - 通过分步骤、分阶段、分系统等方式，降低方案复杂度，逐步演化，避免单一细节推翻整体方案
  - 如果方案过于复杂，可采用设计团队的方式，避免1、2个设计师时可能的思维盲点或经验盲区

## 第四章 高性能架构模式







